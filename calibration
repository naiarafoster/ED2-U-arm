#include <Servo.h>


Servo pinky, ring;

int analogPin = 6;    
int val = 0;

int buttonPin = 2;      //button
int button = 0;

    int n = 0;        //Calibration      
int calibrate[150];
int min1, max1;


void setup() {
   ring.attach(9);  //Attach the servo for the four fingers to pin9
   Serial.begin(9600);  // this is for serial monitor to see the muscle sensor value you're getting
 
   pinMode(buttonPin , INPUT);    //set button as input

    Serial.begin(56000);                  //for
    Serial.println("CLEARDATA");          //excel
    Serial.println("LABEL,Acolumn");      //use
    Serial.println("RESETTIMER");         //only

    //Calibration   //reads button
while(n == 0)
{
  button = analogRead(buttonPin);
   if (button <= 900)               // when button is not pressed do nothing
        {
        ring.write(0);
        }
             else                      // calibrate finger 1
          {
              while(n < 100)
          {
            val = analogRead(analogPin); //muscle sensor connected to pin A3 being stated as val
            Serial.println(val);
          calibrate[n] = val;
          n++;
            ring.write(90);
                                  Serial.print("DATA, read:, ");    //for 
                                  Serial.print(calibrate[n]);       //excel 
                                  Serial.println();                 //use 
                                  delay(5);                         //only
         
         }}}
         min1 =Minimum( calibrate);
         max1= Maximum(calibrate);
         
}

void loop() 
{
  val = analogRead(analogPin); 
  Serial.println(val);
  if(min1 <= val || val <= max1)
  {
    ring.write(90);
  }
  else{
  ring.write(0);
  }                //only
         
}


int Minimum( int hi[])
{ 
  int i;int mini =0;
  for( i=0; i<100;i++)
  {
    if(mini > hi[i])
    {
    mini = hi[i];
    }}
    return hi[i];
  }
int Maximum( int hi[])
{ 
     int i;int maxi =0;
  for( i=0; i<100;i++)
  {
    if(maxi < hi[i])
    {
    maxi = hi[i];
    }}
    return hi[i];
  }
